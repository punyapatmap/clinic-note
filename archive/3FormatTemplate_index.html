<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clinical Note Generator (TH/EN)</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar no-print">
    <div>
      <h1>Clinical Note Generator</h1>
      <div class="sub">Type → Preview → Print/Save as PDF</div>
    </div>
    <div class="actions">
  <label style="display:flex;align-items:center;gap:6px;font-size:12px;">
    Print
    <select id="printMode">
      <option value="opd">OPD Note</option>
      <option value="admit">Admission Note</option>
      <option value="mc">Medical Certificate</option>
    </select>
  </label>

  <button id="btnSaveCase" type="button">Save (HN)</button>
  <button id="btnLoadLatest" type="button">Load latest (HN)</button>

  <button id="btnPrint" type="button" class="primary">Print / Save as PDF</button>
</div>

  </header>

  <main class="layout">
    <!-- INPUT -->
    <section class="panel no-print">
        <label class="block">
  Template
  <select id="templateSelect">
    <option value="blank">Blank</option>
    <option value="cold">Common cold</option>
    <option value="trauma">Trauma</option>
    <option value="dyspepsia">Dyspepsia</option>
  </select>
</label>

      <h2>Input</h2>

      <div class="grid2">
        <label>
          HN
          <input id="hn" placeholder="HN" />
        </label>
        <label>
          Visit Date/Time
          <input id="visitDt" placeholder="e.g., 10 Jan 2026 09:30" />
        </label>

        <label>
          Name (ชื่อ-สกุล)
          <input id="ptName" placeholder="Name / ชื่อ" />
        </label>
        <label>
          Age / Sex (อายุ/เพศ)
          <input id="ageSex" placeholder="e.g., 45 M / 45 ชาย" />
        </label>

        <label>
          Chief Complaint (อาการสำคัญ)
          <input id="cc" placeholder="e.g., Fever 2 days / ไข้ 2 วัน" />
        </label>
        <label>
          Allergies (ประวัติแพ้ยา)
          <input id="allergy" placeholder="NKDA / Penicillin" />
        </label>
      </div>

      <label class="block">
        HPI (ประวัติปัจจุบัน)
        <textarea id="hpi" rows="4" placeholder="Free text (Thai/Eng mixed ok)"></textarea>
      </label>

      <div class="grid2">
        <label class="block">
          PMH (โรคประจำตัว)
          <textarea id="pmh" rows="3"></textarea>
        </label>
        <label class="block">
          Current meds (ยาที่ใช้อยู่)
          <textarea id="homeMeds" rows="3"></textarea>
        </label>
      </div>

      <label class="block">
        Review of System (ทบทวนอาการตามระบบ)
        <textarea id="ros" rows="3" placeholder="Tip: use bullets like - cough, - sore throat"></textarea>
      </label>

      <div class="grid2">
        <label class="block">
          Vitals (สัญญาณชีพ)
          <textarea id="vitals" rows="2" placeholder="T, BP, PR, RR, SpO2"></textarea>
        </label>
        <label class="block">
          Physical Exam (ตรวจร่างกาย)
          <textarea id="pe" rows="2"></textarea>
        </label>
      </div>

      <div class="grid2">
        <div class="block">
  
            <div class="dxHeader">
    <div class="dxTitle">Assessment / Dx (การวินิจฉัย)</div>
  </div>

  <div class="tableWrap">
    <table id="dxTable">
      <thead>
        <tr>
          <th style="width:60px;">#</th>
          <th>Diagnosis</th>
          <th style="width:110px;">Type</th>
          <th style="width:90px;"></th>
        </tr>
      </thead>
      <tbody id="dxTbody"></tbody>
    </table>
    <button id="btnAddDx" type="button">+ Add Dx</button>
  </div>

  <div class="hint">Tip: put main diagnosis first. Type can be “Primary / Secondary / Problem”.</div>
</div>

        <label class="block">
            Additional investigations (การส่งตรวจเพิ่มเติม)
            <input id="investigation" placeholder="None" />
        </label>

        <label class="block">
          Treatment Plan (แผนการรักษา)
          <textarea id="plan" rows="3"></textarea>
        </label>
      </div>

      <h3>Medication Orders (รายการยา)</h3>
      <div class="hint">Use English drug names if possible; instructions can be Thai/Eng.</div>

      <div class="tableWrap">
        <table id="medTable">
          <thead>
            <tr>
              <th>Drug</th>
              <th>Dose</th>
              <th>Route</th>
              <th>Frequency</th>
              <th>Duration</th>
              <th>Instruction</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="medTbody">
            <!-- rows inserted by JS -->
          </tbody>
        </table>
        <div class="medActions">
            <button id="btnAddMed" type="button">+ Add medication</button>
        </div>

      </div>

      <div class="footerRow">
        <label>
          Physician (แพทย์)
          <input id="physician" placeholder="Name" />
        </label>
        <label>
          License No. (เลข ว.)
          <input id="license" placeholder="Optional" />
        </label>
      </div>
    </section>

    <!-- PREVIEW / PRINT AREA -->
    <section class="panel preview">
      <div id="printArea-OPD" class="note noteA4">
        
  <!-- <div class="noteHeader">
    <div class="hospitalName" id="hospitalName">[Your Hospital Name]</div>
    <div class="docTitle">OPD Note</div>
  </div> -->

  <div class="twoCol">
    <!-- LEFT (main note) -->
    <div class="mainCol">
      <!-- “history” section row like your screenshot -->
      <div class="row">
        <div class="rowLabel"><span class="u">ประวัติอดีต</span></div>
        <div class="rowBody pre" data-bind="pmh"></div>
        
        <div class="rowLabel"><span class="u">Current Meds</span></div>
        <div class="rowBody pre" data-bind="homeMeds"></div>
    </div>

    <div class="row">
        <div class="rowLabel"><span class="u">ประวัติเพิ่มเติม</span></div>
        <div class="rowBody pre" data-bind="hpi"></div>
      </div>

      <div class="row">
        <div class="rowLabel"><span class="u">ตรวจร่างกาย</span></div>
        <div class="rowBody pre" data-bind="pe"></div>
      </div>

      <div class="row">
        <div class="rowLabel"><span class="u">วินิจฉัย</span></div>
        <div class="rowBody">
          <ol class="dxListPrint" id="dxPrintList"></ol>
        </div>
      </div>

      <div class="sigMini">
        <div><span data-bind="physician"></span> <span data-bind="license"></span></div>
      </div>
    </div>

    <!-- RIGHT (side column) -->
    <aside class="sideCol">
      <div class="sideBlock avoidBreak">
        <div class="sideTitle u">การส่งตรวจเพิ่มเติม</div>
        <div class="sideBody pre"><span data-bind="investigation"></span></div>
      </div>
      
      <div class="sideBlock avoidBreak">
        <div class="sideTitle u">การรักษาเพิ่มเติม</div>
        <div class="sideBody pre"><span data-bind="plan"></span></div>
      </div>

      <div class="sideBlock avoidBreak">
        <div class="sideTitle u">Home Medication</div>
        <table class="sideMedTable" id="medPrintTable">
          <tbody id="medPrintTbody"></tbody>
        </table>
      </div>
    </aside>
  </div>
</div>

<!-- Admission -->
<div id="printArea-admit" class="note noteA4" style="display:none">
  <div class="twoCol">
    <div class="mainCol">
      <div class="row">
        <div class="rowLabel"><span class="u">Admission Dx</span></div>
        <div class="rowBody">
          <ol class="dxListPrint" id="dxPrintList_admit"></ol>
        </div>
      </div>

      <div class="row">
        <div class="rowLabel"><span class="u">HPI</span></div>
        <div class="rowBody pre" data-bind="hpi"></div>
      </div>

      <div class="row">
        <div class="rowLabel"><span class="u">PE</span></div>
        <div class="rowBody pre" data-bind="pe"></div>
      </div>

      <div class="row">
        <div class="rowLabel"><span class="u">Plan</span></div>
        <div class="rowBody pre" data-bind="plan"></div>
      </div>

      <div class="sigMini">
        <div><span data-bind="physician"></span> <span data-bind="license"></span></div>
      </div>
    </div>

    <aside class="sideCol">
      <div class="sideBlock avoidBreak">
        <div class="sideTitle u">Orders</div>
        <table class="sideMedTable">
          <tbody id="medPrintTbody_admit"></tbody>
        </table>
      </div>
    </aside>
  </div>
</div>

<!-- Medical Certificate -->
<div id="printArea-mc" class="note noteA4" style="display:none">
  <h3 style="margin:0 0 6mm 0;">Medical Certificate</h3>

  <div class="row" style="margin-bottom:5mm;">
    <div class="rowLabel"><span class="u">Name</span></div>
    <div class="rowBody"><span data-bind="ptName"></span></div>
  </div>

  <div class="row" style="margin-bottom:5mm;">
    <div class="rowLabel"><span class="u">HN</span></div>
    <div class="rowBody"><span data-bind="hn"></span></div>
  </div>

  <div class="row" style="margin-bottom:5mm;">
    <div class="rowLabel"><span class="u">Diagnosis</span></div>
    <div class="rowBody" id="mcDxText">-</div>
  </div>

  <div class="row" style="margin-bottom:8mm;">
    <div class="rowLabel"><span class="u">Date</span></div>
    <div class="rowBody"><span data-bind="visitDt"></span></div>
  </div>

  <div class="sigMini">
    <div><span data-bind="physician"></span> <span data-bind="license"></span></div>
  </div>
</div>


    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
