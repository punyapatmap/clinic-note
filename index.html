<!doctype html>
<html lang="th">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clinical Note Generator (TH/EN)</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Trirong:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
  <div id="snippetBox" class="snippet-box hidden"> </div>
  <div id="snipModal" class="modal hidden" role="dialog" aria-modal="true">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Add snippet</div>
      <button id="btnSnipClose" type="button" class="icon">✕</button>
    </div>

    <div class="grid2">
      <label class="block">
        Key (e.g. uri1)
        <input id="snipKey" placeholder="uri1" />
      </label>

      <label class="block">
        Tags (comma separated)
        <input id="snipTags" placeholder="hx, uri, resp" />
      </label>
    </div>

    <label class="block">
      Expanded text
      <textarea id="snipText" rows="4" placeholder="..."></textarea>
    </label>

    <div class="modal-actions">
      <button id="btnSaveSnippet" type="button" class="primary">Save</button>
      <button id="btnSnipCancel" type="button">Cancel</button>
      <span id="snipStatus" class="hint"></span>
    </div>
  </div>
</div>

  <header class="topbar no-print">
    <div>
      <h1>Clinical Note Generator</h1>
      <div class="sub">Type → Preview → Print/Save as PDF</div>
    </div>
    <div class="actions">
      <label style="display:flex;align-items:left;gap:6px;font-size:12px;">
        <select id="templateSelect"></select> <!--this function in app.js -->
      </label>

      <label style="display:flex;align-items:center;gap:6px;font-size:12px;">
        <select id="printMode">
          <option value="opd">OPD Note</option>
          <option value="mc">Medical Certificate</option>
          <option value="admit">Admission Note</option>
        </select>
      </label>

      <button id="btnSaveCase" type="button">Save (HN)</button>
      <button id="btnLoadLatest" type="button">Load latest (HN)</button>
      <button id="btnFormat" type="button">Apply format</button>
      <button id="btnPrint" type="button" class="primary">Print / Save as PDF</button>
    </div>

  </header>

  <main class="layout">

    <!-- INPUT -->
    <!-- This is the section for area where we won't print them.-->
    <section class="panel no-print">
      <div class="grid2">

        <!-- Patient header row -->
        <div class="patient-row">
          <label class="hn">
            HN
            <input id="hn" placeholder="HN" />
          </label>

          <label class="name">
            Name (ชื่อ-สกุล)
            <input id="ptName" placeholder="Name / ชื่อ" />
          </label>

          <label class="age">
            Age / Sex
            <input id="ageSex" placeholder="e.g., 45 M / 45 ชาย" />
          </label>

          <label class="visit">
            Visit Date/Time
            <input id="visitDt" type="datetime-local" />
          </label>
        </div>

        <!-- Normal grid continues -->
        <div class="cc-vital-row">

          <!-- CC -->
          <label class="cc-block">
            Chief Complaint (อาการสำคัญ)
            <input id="cc" placeholder="e.g., Fever 2 days / ไข้ 2 วัน" />
          </label>

          <!-- Vitals -->
          <div class="vital-group">

            <label>
              T
              <input id="vtemp" placeholder="°C" />
            </label>

            <label>
              BP
              <input id="vbp" placeholder="mmHg" />
            </label>

            <label>
              Pulse
              <input id="vpulse" placeholder="/min" />
            </label>

            <label>
              RR
              <input id="vresp" placeholder="/min" />
            </label>

            <label>
              SpO₂
              <input id="vspo2" placeholder="%" />
            </label>

          </div>

        </div>


      </div>

      <label class="block">
        PMH + Home meds (โรคประจำตัว/ยาประจำ)

        <div class="tableWrap">
          <table id="chronicTable">
            <thead>
              <tr>
                <th style="width:60px;">#</th>
                <th>Condition</th>
                <th style="width:120px;">Dx year</th>
                <th>Medication Details</th>
                <th style="width:90px;"></th>
              </tr>
            </thead>
            <tbody id="chronicTbody"></tbody>
          </table>
          <button id="btnAddChronic" type="button">+ Add</button>
        </div>

        <div class="hint">For Drug/Food allergy add "Drug allergy" or "Food allergy" then add details.</div>
      </label>

      <!-- <label class="block">
        Review of System (ทบทวนอาการตามระบบ)
        <textarea id="ros" rows="3" placeholder="Tip: use bullets like - cough, - sore throat"></textarea>
      </label> -->

      <div class="grid2">

        <label class="block">
          HPI (ประวัติปัจจุบัน)
          <textarea id="hpi" rows="6"></textarea>
          <button id="btnAddSnippetHx" type="button" class="mini">+ Add snippet</button>
        </label>

        <label class="block">
          Physical Exam (ตรวจร่างกาย)
          <textarea id="pe" rows="6"></textarea>
          <button id="btnAddSnippetPE" type="button" class="mini">+ Add snippet</button>
        </label>

      </div>

      <div class="block">

        <div class="dxHeader">
          <div class="dxTitle"> Diagnosis (การวินิจฉัย)</div>
        </div>

        <div class="tableWrap">
          <table id="dxTable">
            <thead>
              <tr>
                <th style="width:60px;">#</th>
                <th>Diagnosis</th>
                <th style="width:110px;">Type</th>
                <th style="width:90px;"></th>
              </tr>
            </thead>
            <tbody id="dxTbody"></tbody>
          </table>
          <button id="btnAddDx" type="button">+ Add Dx</button>
        </div>

        <div class="hint">Tip: put main diagnosis first. Type can be “Primary / Secondary / Problem”.</div>
      </div>

      <div class="grid2">

        <label class="block">
          <h3>Treatment (แผนการรักษา)</h3>
          <textarea id="plan" rows="3"></textarea>
        </label>

        <label class="block">
          <h3>Investigation (การส่งตรวจ)</h3>
          <!-- <div id="investigationChips" class="chips"></div> -->
          <input id="investigationInput" list="investigationList" placeholder="e.g., CBC, CXR, UA..." />
          <!-- <datalist id="investigationList"></datalist> -->
          <div class="hint">Type to search, press Enter/click to add. Click a chip to remove.</div>
        </label>

      </div>


      <h3>Medication Orders (รายการยา)</h3>
      <div class="hint">Use English drug names if possible; instructions can be Thai/Eng.</div>

      <div class="tableWrap">
        <table id="medTable">
          <thead>
            <tr>
              <th>Drug</th>
              <th>Dose</th>
              <th>Route</th>
              <th>Frequency</th>
              <th>Duration</th>
              <th>Instruction</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="medTbody">
            <!-- rows inserted by JS -->
          </tbody>
        </table>
        <div class="medActions">
          <button id="btnAddMed" type="button">+ Add medication</button>
        </div>

      </div>

      <div class="footerRow">
        <label>
          Physician (แพทย์)
          <input id="physician" placeholder="Name" />
        </label>
        <label>
          License No. (เลข ว.)
          <input id="license" placeholder="License" />
        </label>
      </div>
    </section>

    <!-- PREVIEW / PRINT AREA -->
    <section class="panel preview">
      <div id="printHost"></div>
    </section>

  </main>

  <script src="app.js"></script>

  <div id="snipModal" class="modal hidden" role="dialog" aria-modal="true">
  <div class="modal-card">
    <div class="modal-head">
      <div class="modal-title">Add snippet</div>
      <button id="btnSnipClose" type="button" class="icon">✕</button>
    </div>

    <div class="grid2">
      <label class="block">
        Key (e.g. uri1)
        <input id="snipKey" placeholder="uri1" />
      </label>

      <label class="block">
        Tags (comma separated)
        <input id="snipTags" placeholder="hx, uri, resp" />
      </label>
    </div>

    <label class="block">
      Expanded text
      <textarea id="snipText" rows="4" placeholder="..."></textarea>
    </label>

    <div class="modal-actions">
      <button id="btnSaveSnippet" type="button" class="primary">Save</button>
      <button id="btnSnipCancel" type="button">Cancel</button>
      <span id="snipStatus" class="hint"></span>
    </div>
  </div>
</div>

</body>

</html>